<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<!--last modified on Saturday, October 03, 1998 04:19 PM -->
<HTML><!-- #BeginTemplate "/Templates/pink.dwt" --><!-- DW6 -->
<HEAD>
<!-- #BeginEditable "doctitle" --> 
<TITLE>VB-Like E World Scripting</TITLE>
<!-- #EndEditable --> 
<meta http-equiv=content-type content="text/html; charset=UTF-8">
<meta name="Author" content="Mark S. Miller">
<link rel=author rev=made title="Mark S. Miller">
<META NAME="description" CONTENT="E: Cryptographic Capabilities for Distributed Smart Contracting">
<META NAME="keywords" CONTENT="p2p, p2p language, p2p computing, p2p objects, secure p2p, p2p capabilities, object oriented p2p,
  capability-based p2p, Capability Security, Capabilities, Cryptography, Distributed Objects, Distributed
  Language, Distributed Capabilities, Lambda Calculus, Scripting Language, Distributed Language, Persistent
  Language, Persistent Capabilities, Persistent Objects, Java Shell, Capability Shell, Scripting Java, Smart
  Contracting, Agoric E-Commerce, Open Source, Message pipelining, quasi literal, vat, event loop, granovetter diagram ">
<link rel="stylesheet" href="../erights.css" type="text/css">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFEEDD" LINK="#0000FF" VLINK="#800080">
<TABLE BORDER="0" width="100%">
  <TR VALIGN="TOP"> 
    <TD WIDTH="10%">&nbsp; </TD>
    <TD> <TABLE BORDER="0" WIDTH="100%">
        <TR> 
          <TD ALIGN="LEFT" valign="top"> <table cellpadding="2">
              <tr> 
                <td valign="top" align="left" colspan="3"><a href="../index.html"><img src="../images/e-lambda.gif" width="32" height="32" border="0" alt="ERights Home"></a> 
                  <!-- #BeginEditable "Path" -->/&nbsp;<a href="index.html">e</a>&nbsp;<!-- #EndEditable --></td>
              </tr>
              <tr> 
                <td valign="top" align="right"><!-- #BeginEditable "PrevButton" --><a href="vb-oid-scripting.html" title="Back to: World Scripting in VB"><img src="../images/prev.gif" width="64" height="32" alt="Back to: World Scripting in VB" border="0"></a><!-- #EndEditable --></td>
                <td valign="bottom" align="left"><!-- #BeginEditable "FirstButton" --><!-- #EndEditable --></td>
                <td valign="top" align="left"><!-- #BeginEditable "NextButton" --><a href="satan/index.html" title="On to: Satan Comes to Dinner in E"><img src="../images/next.gif" width="64" height="32" alt="On to: Satan Comes to Dinner in E" border="0"></a><!-- #EndEditable --></td>
              </tr>
            </table></TD>
          <TD rowspan="2" ALIGN="RIGHT"> <P ALIGN="RIGHT"><FONT SIZE="7"><!-- #BeginEditable "BigTitle" --><FONT SIZE="7"><b>E 
              World Scripting Examples</b><br>
              <font size="5"> in the Visual Basic syntactic tradition<br>
              </font><font size="3">(from a correspondence with Tony Grant, archived 
              on ec_ez)</font></FONT><!-- #EndEditable --></FONT> </TD>
        </TR>
        
      </TABLE>
      <hr> <!-- #BeginEditable "LongBody" -->
      
      <p>This document presents examples in E for scripting behaviors in our virtual 
        worlds. Tony started things off with examples showing how our worlds might 
        be made easily scriptable for the Visual Basic programmer. After some 
        (archived) iterations, here is my best take on doing Tony's examples within 
        all our foundational constraints--including capability secure programming--in 
        the E language. The examples use E as it works today except for two enhancements 
        noted below.</p>
      <p><a href="vb-oid-scripting.html">Here</a> is Tony's original message. 
        The examples in this document and Tony's message are now cross-linked 
        to each other so you can easily see how the examples compare. IMO, the 
        results compare well with the imagined Visual Basic code. For those more 
        comfortable with the C syntactic tradition (spanning at least C, C++, 
        Java, Perl, Python, Tcl, and csh), <a href="e-world-scripting.html">here</a> 
        is a version of this document you may like better. The E language accepts 
        both styles.</p>
      <p>However, I'm almost totally ignorant of Pluribus and of the internals 
        of the cosm level of our system, so the interface to it presented here 
        may be wholly unrealistic. Cosm/Unum programmers: How reasonable are our 
        assumptions? How reasonable are our examples?</p>
      <p> 
      <hr align="CENTER">
      [<a name="cosm-api"></a><a href="vb-oid-scripting.html#cosm-api">See the 
      original version</a>]
      <p></p>
      <h2>Hypothetical Unum/Puppet/Cosm Interface</h2>
      <p>Standard events:</p>
      <pre>    noticeClick
    noticeBump(other)
    noticeRegionEntry(avatar)
    noticeRegionExit(avatar)
    noticeSpeech(avatar, text)</pre>
      <p>&quot;other&quot; and &quot;avatar&quot; above would probably be some 
        appropriate level of puppet, but none of this has been revisited since 
        the puppet revolution. Suggestions and clarifications would be most appreciated!</p>
      <p>&quot;Instance&quot; Variables:</p>
      <pre>    myName
    myPossessions
    myOwner
    myRegion
    myBody</pre>
      <p>&quot;Global&quot; Name Spaces:</p>
      <pre>    bodies
    regions
    gestures</pre>
      <p>&quot;Global&quot; Functions:</p>
      <pre>    PlayGesture(gesture)
    Say(text)
    TestLaunch(avatarBody, region)
    WalkTo(region)
    TeleportTo(region)
    RandomElement(collection)</pre>
      <p>(I need to understand more about portals &amp; teleport pads)</p>
      <p> 
      <hr align="CENTER">
      [<a name="example1"></a><a href="vb-oid-scripting.html#example1">See the 
      original version</a>]
      <p></p>
      <p>&gt;1. Launch Microcosm with Yappy as the avatar and have him transition 
        back<br>
        &gt;and forth between CentralPark region and BeachResort.<br>
        &gt;<br>
        &gt;This would help us to find any memory leaks occurring on transitions. 
        I<br>
        &gt;don't know how much overhead would be involved in this, but it would 
        be<br>
        &gt;great if it were simple:</p>
      <pre>    TestLaunch(bodies[&quot;Yappy&quot;], regions[&quot;CentralPark&quot;])

    For i In (1..100)
        TeleportTo(regions[&quot;BeachResort&quot;])
        TeleportTo(regions[&quot;CentralPark&quot;])
    End For</pre>
      <p> 
      <hr align="CENTER">
      [<a name="example2"></a><a href="vb-oid-scripting.html#example2">See the 
      original version</a>]
      <p></p>
      <p>&gt;2. Visit every region in a realm. This would a great script to run 
        after<br>
        &gt;new art checking to make sure that none of the new regions have broken 
        the<br>
        &gt;world.</p>
      <pre>    TestLaunch(bodies[&quot;Dax&quot;], regions[&quot;CentralPark&quot;])

    For r In (myRegion realm regions)
        TeleportTo(r)
    End For</pre>
      <p> 
      <hr align="CENTER">
      [<a name="example3"></a><a href="vb-oid-scripting.html#example3">See the 
      original version</a>]
      <p></p>
      <p>&gt;3. Simple Click response:</p>
      <pre>    On noticeClick
        Say(&quot;Ow!&quot;)
    End On</pre>
      <p> 
      <hr align="CENTER">
      [<a name="example4"></a><a href="vb-oid-scripting.html#example4">See the 
      original version</a>]
      <p></p>
      <p>&gt;4. The next generation Click response. Play a random gesture.</p>
      <pre>    On noticeClick
        PlayGesture(RandomElement(gestures))
    End On
</pre>
      <p>Where <tt>RandomElement</tt> could be defined by:</p>
      <pre>    Define RandomElement := To (collection)
        Define elements := collection indexable
        elements[elements size random]
    End To</pre>
      <p> 
      <hr align="CENTER">
      [<a name="example5"></a><a href="vb-oid-scripting.html#example5">See the 
      original version</a>]
      <p></p>
      <p>&gt;5. A greeting bot. When an avatar enters the region, the bot welcomes 
        him<br>
        &gt;or her:</p>
      <pre>    On noticeRegionEntry(avatar)
        Say(&quot;Hi &quot; + avatar name + &quot;. Welcome to KidsWorld!&quot;)
    End On</pre>
      <p> 
      <hr align="CENTER">
      [<a name="example6"></a><a href="vb-oid-scripting.html#example6">See the 
      original version</a>]
      <p></p>
      <p>&gt;6. A ridiculously simple Eliza:</p>
      <pre>    On noticeSpeech(avatar, text)
        Say(&quot;That's interesting &quot; + avatar name + &quot;. Tell me more about &quot; + text)
    End On</pre>
      <p> 
      <hr align="CENTER">
      [<a name="example7"></a><a href="vb-oid-scripting.html#example7">See the 
      original version</a>]
      <p></p>
      <p>&gt;7. Have a bot in your Turf that reacts to the mention of your name.</p>
      <pre>    On noticeSpeech(avatar, text)
        If (text includes(myOwner name))
            PlayGesture(gestures[&quot;Spin&quot;])
            Say(&quot;I sure do love &quot; + myOwner name)
        End If
    End On</pre>
      <p> 
      <hr align="CENTER">
      [<a name="example8"></a><a href="vb-oid-scripting.html#example8">See the 
      original version</a>]
      <p></p>
      <p>&gt;8. The wandering avatar: (no error checking for a region with no 
        portals)<br>
        <br>
        I'm not sure what you intended by saying &quot;no error checking&quot;. 
        If you want to code in ignorance of the issue of errors, uncaught errors 
        will terminate your loop:</p>
      <pre>    TestLaunch(bodies[&quot;Dax&quot;], regions[&quot;CentralPark&quot;])

    For i In (1..100)
        WalkTo(RandomElement(regions))
    End For
</pre>
      <p>The first <tt>WalkTo</tt> that throws an error will exit this loop. Alternatively, 
        if you want to ignore errors and keep going:</p>
      <pre>    TestLaunch(bodies[&quot;Dax&quot;], regions[&quot;CentralPark&quot;])

    For i In (1..100)
        Try
            WalkTo(RandomElement(regions))
        Catch
        End Try
    End For
</pre>
      <p><tt>try/catch</tt> is how you handle errors. The empty curlies after 
        the '<tt>catch</tt>' say to do nothing on an error.</p>
      <p><img src="kilroy.gif" width="560" height="26" align="BOTTOM" border="0"></p>
      <h2>Assumed E Enhancements</h2>
      <p>E has already reserved the &quot;<tt>On</tt>&quot; keyword. This document 
        assumes that the &quot;<tt>On</tt>&quot; keyword has been added to the 
        language in a role similar to the existing &quot;<tt>To</tt>&quot; keyword. 
        The difference between &quot;<tt>On</tt>&quot; and &quot;<tt>To</tt>&quot; 
        reflect two very different purposes for invocation (calling/sending) in 
        object oriented programming.</p>
      <ul>
        <li>When object A invokes object B, usually it is to serve a purpose of 
          A's, and the invocation can be seen as an imperative or query. The invocation 
          is assumed to be on the <i>caller's behalf</i>. For this case the &quot;<tt>To</tt>&quot; 
          form is used to define the corresponding method, as in &quot;<tt>To 
          verb(arg, ...)</tt>&quot;, and invocation can be either a synchronous 
          call or an asynchronous send (&quot;<tt>&lt;-</tt>&quot;). A synchronous 
          call is a sensible possibility since A is subcontracting to B, and B's 
          effects are typically part of the effects A is trying to bring about. 
          Since the invocation is assumed to be on A's behalf, a to-invocation 
          has an implicit return value, which is a Promise in the asynchronous 
          case. 
          <p> 
        <li>The other common purpose for an invocation is event notification (called 
          by various o-o commentators <i>Observers, Dependents, Reactors, ...</i>). 
          Typically, object B will have earlier registered with A an interest 
          in certain kinds of events. Later, when A decides that these events 
          have occurred, it informs all interested parties, like B, by invoking 
          them. These invocations are assumed to be on the <i>callee's behalf</i>. 
          The method would be defined as &quot;<tt>On eventName(arg, ...)</tt>&quot;, 
          and the corresponding invocation could only be asynchronous (&quot;<tt>&lt;-</tt>&quot;), 
          since B's reactions to the event (and any consequent side effects) are 
          not properly part of the action A was in the midst of. By the same token, 
          A is assumed not to be interested in any results or exceptions from 
          B, so no implicit return value is supplied. 
      </ul>
      <p>As Hypercard has shown, the event driven model is quite pleasant. Unlike 
        Smalltalk, Hypercard does not make an object register in order to receive 
        notifications of events it's interested in. It suffices to have (the equivalent 
        of) an <tt>on</tt>-method for that event, and to be in a context in which 
        these events are <i>ambient</i>. For our worlds, the Frame/Session (or 
        maybe the container?) can serve as such a context. [Need to explain <i>group 
        membership</i>] We therefore need a CRAPI-like E meta-protocol so such 
        a context can find out, when an object is added to that context, what 
        <tt>on</tt>-methods it has. An object can be <i>assumed</i> to be interested 
        in any event it has an <tt>On</tt>-method for. 
      <P ALIGN="left">&nbsp;
      <!-- #EndEditable --></TD>
    <TD WIDTH="10%" rowspan="2" align="right" valign="bottom"> </TD>
  </TR>
  <TR VALIGN="TOP"> 
    <TD WIDTH="10%">&nbsp;</TD>
    <TD> <hr>
      Unless stated otherwise, all text on this page which is either unattributed 
      or by Mark S. Miller is hereby placed in the public domain. 
        <div align="center"> 
        <table width="100%" cellpadding="4" cellspacing="0">
          <tr> 
            <td> <table align="left" cellpadding="2">
                <tr> 
                  <td valign="top" align="left" colspan="3"><a href="../index.html"><img src="../images/e-lambda.gif" width="32" height="32" border="0" alt="ERights Home"></a> 
                    <!-- #BeginEditable "Path2" -->/&nbsp;<a href="index.html">e</a>&nbsp;<!-- #EndEditable --></td>
                </tr>
                <tr> 
                  <td valign="top" align="right"><!-- #BeginEditable "PrevButton2" --><a href="vb-oid-scripting.html" title="Back to: World Scripting in VB"><img src="../images/prev.gif" width="64" height="32" alt="Back to: World Scripting in VB" border="0"></a><!-- #EndEditable --></td>
                  <td valign="bottom" align="left"><!-- #BeginEditable "FirstButton2" --><!-- #EndEditable --></td>
                  <td valign="top" align="left"><!-- #BeginEditable "NextButton2" --><a href="satan/index.html" title="On to: Satan Comes to Dinner in E"><img src="../images/next.gif" width="64" height="32" alt="On to: Satan Comes to Dinner in E" border="0"></a><!-- #EndEditable --></td>
                </tr>
              </table></td>
            <td> <table border="3" align="center" cellpadding="6" cellspacing="3">
                <tr> 
                  <td> <div align="center"><font size="-1"><a href="../elib/index.html">ELib</a> 
                      &nbsp;&nbsp; <a href="../elang/index.html">E Language</a> 
                      &nbsp;&nbsp; <a href="../smart-contracts/index.html">Smart 
                      Contracts</a> &nbsp;&nbsp; <a href="../related.html">Related</a> 
                      </font></div></td>
                </tr>
                <tr> 
                  <td> <div align="center"><font size="-1"><a href="../download/index.html">Download</a> 
                      &nbsp;&nbsp; <a href="http://mumble.net/e/faq.html">FAQ</a> 
                      &nbsp;&nbsp; <a href="../javadoc/index.html">API</a> &nbsp;&nbsp; 
                      <a href="http://www.eros-os.org/pipermail/e-lang/">Mail 
                      Archive</a> &nbsp;&nbsp; <a href="../donate.html">Donate</a></font></div></td>
                </tr>
              </table></td>
            <td><div align="right"> 
                <p><a href="https://sourceforge.net/tracker/?func=add&amp;group_id=75274&amp;atid=551529"><i>report 
                  bug</i></a> (including <a href="http://validator.w3.org/check/referer">invalid 
                  html</a>) </p>
                <p><a href="http://www.epic.org/crypto/"><img src="../images/key.gif" width="37" height="19" alt="Golden Key Campaign" border="0"></a>&nbsp;<a href="http://www.eff.org/br/"><img src="../images/ribbon.gif" width="18" height="30"
alt="Blue Ribbon Campaign" border="0"></a></div></td>
          </tr>
          
        </table>
      </div></TD>
  </TR>
</TABLE>
</BODY>
<!-- #EndTemplate --></HTML>
