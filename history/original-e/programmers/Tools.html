<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
   <TITLE>E Tools and Utilities</TITLE>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.0Gold (Win95; I) [Netscape]">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000">

<PRE><IMG SRC="midi_e.gif" ALT="Electric Communities: E Programming Language" HEIGHT=30 WIDTH=30>  <A HREF="index.html">Contents</A>  <A HREF="../index.html">Home Page</A>
</PRE>

<P>
<HR></P>

<H1>E Tools and Utilities</H1>

<P>
<HR></P>

<BLOCKQUOTE>
<P>E provides several tools and utilities:</P>

<P> <A HREF="#E compiler">E compiler (ecomp)<BR>
</A><A HREF="#E Java Interpreter">E Java Interpreter (javaec)<BR>
</A><A HREF="#Distributed garbage collector">Distributed Garbage Collector<BR>
</A><A HREF="#ThreadWatcher">ThreadWatcher utility<BR>
</A><A HREF="#Blesser">Class Blesser </A><BR>
</P>
</BLOCKQUOTE>

<P>
<HR></P>

<H1><A NAME="E compiler"></A>E compiler (ecomp)</H1>

<P> </P>

<BLOCKQUOTE>
<P>E provides its own compiler, called <TT>ecomp</TT>. <TT>ecomp</TT> compiles
code directly to Java bytecodes (<TT>.class</TT> files). The <TT>ecomp</TT>
compiler can compile Java code as well as E code. </P>

<H2>Files generated by ecomp</H2>

<P>Like other Java compilers, <TT>ecomp</TT> generates one <TT>.class</TT>
file for every Java class defined in the source file.</P>

<P> For every E-class defined in the source files passed to <TT>ecomp</TT>,
the compiler generates the following<TT>.class</TT> files:</P>

<P> </P>

<UL>
<LI><TT><I>classname</I>.class</TT></LI>

<P> </P>

<LI><TT><I>classname</I>Object_$_Intf.class</TT></LI>

<P> </P>

<LI><TT><I>classname</I>Object.class</TT></LI>

<P> </P>

<LI><TT><I>classname</I>Object_$_Proxy.class</TT></LI>

<P> </P>

<LI><TT><I>classname</I>Object_$_Channel.class</TT></LI>

<P> </P>

<LI><TT><I>classname</I>Object_$_Sealer.class</TT></LI>

<P> </P>

<LI><TT><I>classname</I>Object_$_Impl$closure.class</TT></LI>

<P> </P>

<LI><TT><I>classname</I>Object_$_Unsealer.class</TT></LI>

<P> </P>

<LI><TT><I>classname</I>Object_$_Impl.class</TT><BR>
</LI>
</UL>

<H2>ecomp</H2>

<PRE><TT>ecomp [-verbose][-obfuscate][-classpath <I>path</I>]
  {[-d <I>directory</I>]  <I>filename(s)</I> }</TT></PRE>

<P>The <I><TT>ecomp</TT></I> command compiles E and Java source code into
Java bytecodes. You then use the E Java interpreter, <TT>javaec,</TT> to
interpret the Java bytecodes. The <TT>javaec</TT> command is similar to
Java's <TT>java</TT> command, but adds E functionality such as the Trust
Manager and Distributed Garbage Collector.</P>

<P> </P>

<H3>Options</H3>

<UL>
<LI><TT>-verbose </TT></LI>

<P>Writes out information about loaded source and class files and compilation
times.</P>

<P> </P>

<LI><TT>-obfuscate</TT></LI>

<P> Scrambles the names of all private methods and fields in the generated
<TT>.class</TT> file.</P>

<P> </P>

<LI><TT>-classpath <I>path</I></TT></LI>

<P> </P>

<P>Prefixes the value of <I><TT>path</TT></I> to the value of the CLASSPATH
environment variable. Note that this is different behavior from <TT>javaec</TT>,
which actually overrides CLASSPATH when you use this same option.</P>

<P> </P>

<LI><TT>-d <I>directory name</I></TT></LI>

<P> </P>

<P>Specifies the root directory of the class hierarchy. For example, entering
the following line:</P>

<P> </P>

<PRE><TT>    ecomp -d &lt;my_dir&gt; MyProgram.e</TT></PRE>

<P>saves the <TT>.class</TT> files for the classes in the <TT>MyProgram.e</TT>
source file to the directory <TT>my_dir.</TT>The directory must already
exist. See the following section <I>Where ecomp outputs class files</I>
for more information.</P>

<P> </P>

<LI><TT>-g</TT></LI>

<P> Generates local variable information for debuggers.</P>

<P> </P>

<LI><I><TT>filename(s)</TT></I></LI>

<P> </P>

<P>The file or files to be compiled. By convention, files containing E-classes
should have a <TT>.e</TT> extension, while files containing only Java classes
should have a <TT>.java</TT> extension. However, this is not required.
</P>

<P>You can specify multiple files.</P>

<P> Note that if there are cyclic dependencies between classes defined
in different files, all of the containing files must be compiled together.</P>

<P> </P>
</UL>

<H2>Where ecomp outputs class files</H2>

<P>E follows Java rules on packages and file hierarchy, and the compiler
generates Java bytecode in a location based on your package name.</P>

<P> Where <TT>ecomp</TT> outputs the generated .<TT>class</TT> files depends
on whether you specify a directory with the <TT>-d</TT> option, and if
you specify a package in your source file. The basic rule is that if you
specify a package in your source file, you should either be in that directory
when you compile, or specify it with the -d option (and it must exist).</P>

<P> </P>

<H3>Without the -d option</H3>

<P>If you do not specify a directory, or if you specify a directory that
does not exist, <TT>ecomp</TT> create the class file(s) in the directory
where the source file is.</P>

<P> Note that if you specify a package in your source file, but do not
specify a directory when you compile, <TT>ecomp</TT> still outputs the
generated <TT>class</TT> file(s) in the source file's directory, regardless
of the path indicated by the package line. Unless you compile in the directory
specified by the package, <TT>javaec</TT> will not be able to find these
files later on when you try to run the program, since the package and the
file directory do not match.</P>

<P> </P>

<H3>With the -d option</H3>

<H4>No package statement</H4>

<P><TT>ecomp</TT> creates the <TT>.class</TT> file(s) in the directory
specified by the indicated path. For example, if you run the following
line:</P>

<P> </P>

<PRE><TT>  ecomp -d /var/tmp filename</TT></PRE>

<P><TT>ecomp</TT> creates the class file(s) in<TT> /var/tmp</TT>.</P>

<P> </P>

<H4>With a package statement</H4>

<P><B>With a corresponding directory path</B>. If there is a directory
path under the specified directory corresponding to the <TT>package</TT>
statement, <TT>ecomp</TT> creates the <TT>.class </TT>files in that directory
path, below the current directory specified by the package name. For example,
if your source file contains the following line:</P>

<P> </P>

<PRE><TT>  package ec.misc.foo; </TT></PRE>

<P>and you run</P>

<P> </P>

<PRE><TT>  ecomp -d /var/tmp filename</TT></PRE>

<P><TT>ecomp</TT> creates the <TT>class</TT> file(s) in the directory <TT>/var/tmp/ec/misc/foo</TT>
(providing <TT>/ec/misc/foo</TT> exists under<TT>/var/tmp</TT>).</P>

<P> <B>Without a corresponding directory path.</B> <TT>ecomp</TT> creates
the <TT>.class </TT>file(s) in the current directory, where the source
file exists. Be sure that in this situation you are already in the correct
directory (specified by the <TT>package</TT> line in the source file) when
you compile.</P>

<P> </P>
</BLOCKQUOTE>

<P>
<HR></P>

<H1><A NAME="E Java Interpreter"></A>E Java Interpreter (javaec) </H1>

<BLOCKQUOTE>
<P>E provides its own Java interpreter, <TT>javaec</TT>, to interpret and
execute Java bytecodes generated by the compiler. The <TT>javaec</TT> interpreter
is based on Java's interpreter, <TT>java</TT>, but includes E features
such as the Class Blesser, distributed garbage collector, and Trust Manager.</P>

<P> Note that to fully implement the distributed garbage collector, you
must run <TT>javaec</TT> with the E system argument <TT>-ECenableDgc </TT>(described
in the following section):</P>

<P> </P>

<PRE><TT>  javaec classname -ECenableDgc</TT></PRE>

<P>To turn on the Class Loader, you must also include the following code
in your main object:</P>

<P> </P>

<PRE><TT>  RtLauncher.setupClassLoader(int Security_Level);</TT></PRE>

<P>This call turns on the E class loader. Add this line before any <TT>RtLauncher.launch</TT>
calls. See the documentation on <I>RtEEnvironment</I> and also the section<I>
Creating access-controlled objects </I>in the <I>E Runtime</I> chapter
for more information.</P>

<P> </P>

<H2>The -EC* standard command-line arguments</H2>

<P>E provides the <TT>-EC*</TT> system arguments that you can enter at
the command line when you run an E program. These arguments are stripped
out of the standard arguments array when you launch an object. This lets
you run a program with E-provided system facilities, but not have these
arguments passed in turn to any objects you launch in your program.</P>

<P> Currently, E provides the <TT>-ECenableDgc</TT> argument, which turns
on distributed garbage collection.</P>

<P> </P>

<H2>Running javaec</H2>

<P>To execute a Java or E program that has no package, you must be in the
directory that contains the class file(s). To execute a packaged program,
the following conditions apply:</P>

<P> </P>

<UL>
<LI>The <TT>.class</TT> file must be in a directory path matching the package
name.</LI>

<P> </P>

<LI>This directory path must be rooted in one of the entries in your $CLASSPATH.</LI>

<P> </P>

<LI>You do not need to be in the same directory as the <TT>.class</TT>
file when you run <TT>javaec</TT>. </LI>
</UL>

<P>To run <TT>javaec</TT>, its directory must be included in your PATH
variable. E will specify a default directory during installation, but you
must update your PATH if you change this directory.</P>

<P> </P>

<H2>javaec</H2>

<PRE><TT>javaec [-classpath path] [-ms n ] [-noasyncgc]
  [-ss x ][-oss x ][-v, -verbose ][-verify ]
  [-verifyremote][-noverify][-verbosegc]
  <I>classname</I>.class <I>program arguments</I></TT></PRE>

<H3>Options</H3>

<UL>
<LI><TT>-classpath <I>path</I></TT></LI>

<P> Specifies the path E uses to look up classes. If you have set a default
for CLASSPATH, using this option overrides that default (note that this
is different behavior than <TT>ecomp</TT>'s <TT>classpath</TT> option).
Enter the path using the following format:</P>

<P> </P>

<PRE><TT>  directory1:directory2:directory <I>n</I></TT></PRE>

<P>with directories separated by colons. Use a single period (.) to indicate
the current directory. For example:</P>

<P> </P>

<PRE><TT>  .:/home/lani/classes:/usr/local/e/classes</TT></PRE>

<LI><TT>-ms <I>n</I></TT></LI>

<P> Sets the size of the memory allocation pool (the garbage collected
heap) to <I><TT>n</TT></I>, which must be greater than 1000 bytes. The
default units for <I>n</I> are bytes, but you can change this. Append either
the letter &quot;k&quot; to set the default unit to kilobytes, or the letter
&quot;m&quot; for to change it to megabytes. The default is <TT>-ms3m</TT>,
for 3 megabytes of memory.</P>

<P> </P>

<LI><TT>-noasyncgc </TT></LI>

<P>Turns off asynchronous garbage collection. When passed as an option,
no garbage collection takes place unless it is explicitly called or the
program runs out of memory. Normally garbage collection runs as an asynchronous
thread in parallel with other threads.</P>

<P> </P>

<LI><TT>-ss <I>n </I></TT></LI>

<P>Each Java thread has two stacks: one for Java code and one for C code.
The <TT>-ss</TT> option sets the maximum stack size that can be used by
C code in a thread to <I>n</I>. Every thread that is spawned during the
execution of the program passed to java has <I>n</I> as its C stack size.</P>

<P> The default unit for <I>n</I> is bytes, and <I>n</I> must be greater
than 1000 bytes. You can change the default unit by appending either the
letter &quot;k&quot; for kilobytes or the letter &quot;m&quot; for megabytes.
The default stack size is 64 kilobytes (<TT>-ss 64k</TT>).</P>

<P> </P>

<LI><TT>-oss <I>n</I></TT></LI>

<P> Each Java thread has two stacks: one for Java code and one for C code.
The <TT>-oss</TT> option sets the maximum stack size that can be used by
Java code in a thread to <I>n</I>. Every thread that is spawned during
the execution of the program passed to java has <I>n</I> as its Java stack
size. </P>

<P>The default unit for <I>n</I> is bytes, and <I>n</I> must be greater
than 1000 bytes. You can change the default unit by appending either the
letter &quot;k&quot; for kilobytes or the letter &quot;m&quot; for megabytes.
The default stack size is 400 kilobytes (<TT>-ss400k</TT>).</P>

<P> </P>

<LI><TT>-v, -verbose </TT></LI>

<P>Prints a message to <TT>stdout</TT> each time a class file is loaded.</P>

<P> </P>

<LI><TT>-verify </TT></LI>

<P>Runs the verifier on all code.</P>

<P> </P>

<LI><TT>-verifyremote</TT> </LI>

<P>Runs the verifier on all code that is loaded into the system via a classloader.
<TT>verifyremote</TT> is the default for the interpreter.</P>

<P> </P>

<LI><TT>-noverify </TT></LI>

<P>Turns verification off.</P>

<P> </P>

<LI>-<TT>verbosegc</TT> </LI>

<P>Causes the garbage collector to print out messages whenever it frees
memory. </P>

<LI><TT><I>classname</I>.class <I>program arguments</I></TT></LI>

<P> The name of the compiled E or Java class to run. See the following
section on <I>Class names</I> for information on using class names.</P>

<P> <B>Program arguments.</B> You can pass in either E-provided system
arguments or any arguments pertinent to your program. Currently, E provides
the <TT>-ECenableDgc</TT> argument to turn on distributed garbage collection.
See <I>The EC* standard command line arguments</I> at the beginning of
this section for more information.</P>

<P> Command line arguments with a <I>key=value</I> syntax should use the
syntax <TT>x=y</TT>. For example, <TT>host=localhost</TT>.</P>

<P> E lets you pass command line arguments to an object you launch to create
restricted environments. For example, if you run <I>javaec</I> with the
following arguments:</P>

<P> </P>

<PRE><TT>    javaec myfile host=localhost</TT></PRE>

<P>you can pass this to objects you launch in the application (with <TT>RtLauncher.launch</TT>),
and then create a restricted file system environment using this path. See
the documentation on <I>Creating access controlled objects </I>(in the
<I>E Runtime </I>chapter), <I>RtLauncher</I>, and <I>RtEEnvironment</I>
(in the <I>E Class Library </I>chapter) for more information.</P>

<P> </P>
</UL>

<H3>Class names</H3>

<P>When you run <TT>javaec</TT>, you must fully qualify the class file
name like you do in Java. This means that if you specified a package in
the original source file, you must include the package hierarchy in the
<TT>javaec</TT> command line. For example, if your source file <TT>myexampleclass</TT>
has the line:</P>

<P> </P>

<PRE><TT>  package ec.e.examples:</TT></PRE>

<P>you must run <TT>javaec</TT> with the package hierarchy:</P>

<P> </P>

<PRE><TT>  javaec ec.e.examples.myexampleclass</TT></PRE>

<P><TT>javaec</TT> passes any arguments following <I><TT>classname</TT></I>
to the program.</P>

<P> The bytecodes for the E or Java class are in a file <TT><I>classname</I>.class.
ecomp </TT>generates this file when you compile the corresponding class
source file. <TT>ecomp</TT> automatically adds this extension to the bytecode
file when the class is compiled.</P>

<P> <TT>classname</TT> must contain a <TT>main()</TT> method, which E executes
and then exits, unless <TT>main()</TT> creates one or more threads. If
any threads are created by<TT> main(),</TT> then E doesn't exit until the
last thread exits. The <TT>main()</TT> method is defined as follows:</P>

<P> </P>

<PRE><TT>  class Aclass {public static void main(String argv[]){
    &lt; main code &gt;
    }  
  }</TT>
</PRE>

<P>As in Java, when you define your own E or Java classes, you need to
specify their location using CLASSPATH. See the Java documentation on CLASSPATH
for more details. Note that the system always appends the location of the
system classes onto the end of the class path unless you use the<TT> -classpath</TT>
option to specify a path. </P>
</BLOCKQUOTE>

<P>
<HR></P>

<H1><A NAME="Distributed garbage collector"></A>Distributed garbage collector</H1>

<P> </P>

<BLOCKQUOTE>
<P>The E product provides a distributed garbage collector. Unlike Java's
garbage collector, which performs garbage collection only within the scope
of your local machine, E's distributed garbage collector performs garbage
collection over the net for your distributed objects.</P>

<P> To use the distributed garbage collector, pass the <TT>-ECenableDgc</TT>
argument on the command line when you run <TT>javaec</TT>. For example:</P>

<P> </P>

<PRE><TT>  javaec Myfile -ECenableDgc</TT></PRE>
</BLOCKQUOTE>

<P>
<HR></P>

<H1><A NAME="ThreadWatcher"></A>ThreadWatcher </H1>

<BLOCKQUOTE>
<P><TT>import ec.util.ThreadWatcher;</TT></P>

<P> <I>ThreadWatcher</I> is a Java class which creates a daemon thread
to monitor all of the threads in the system and periodically print out
what threads are running. You can set the periodicity, and start and stop
the monitor. This utility is useful when you have a Java application that
hangs, and you want to know what is running.</P>

<P> You can only have one <I>ThreadWatcher</I> instance active at one time.</P>

<P> </P>

<H2>Creation</H2>

<P>You can not explicitly create a <I>ThreadWatcher. </I>The system does
it for you through class methods which start watching.</P>

<P> </P>

<H2>Public variables</H2>

<P><TT>public static int waitTime = 5000 </TT></P>

<BLOCKQUOTE>
<P>This is the wait interval, and can be changed while the <I>ThreadWatcher</I>
is running. If it is changed, the former <TT>waitTime</TT> will still be
used for the current &quot;watch&quot; slice, but it will then start using
the new <TT>waitTime</TT>. <TT>waitTime</TT> is specified in milliseconds.
</P>
</BLOCKQUOTE>

<H2>Methods</H2>

<P><TT>public static void startWatching() </TT></P>

<BLOCKQUOTE>
<P>Starts up the unique <I>ThreadWatcher</I> (if it is not already running),
which will print out what threads are running every 5 seconds. Returns
immediately, as the <I>ThreadWatcher</I> runs in it's own thread. </P>
</BLOCKQUOTE>

<P><TT>public static void startWatching(int timeToWait) </TT></P>

<BLOCKQUOTE>
<P>Starts up the unique <TT>ThreadWatcher</TT> (if it is not already running),
which will print out what threads are running every &quot;timeToWait&quot;
seconds. Returns immediately, as the <I>ThreadWatcher</I> runs in it's
own thread. <TT>TimeToWait</TT> is specified in milliseconds. </P>
</BLOCKQUOTE>

<P><TT>public static void stopWatching() </TT></P>

<BLOCKQUOTE>
<P>Stops the unique <I>ThreadWatcher</I> (if it is not running) </P>
</BLOCKQUOTE>

<P><TT>public static void showThreads() </TT></P>

<BLOCKQUOTE>
<P>Shows all the threads (this is the same method that is called periodically
by the <I>ThreadWatcher</I> itself). Note that the <I>ThreadWatcher</I>
doesn't have to be started to call this, you can manually keep track of
all the threads by calling this whenever you want. </P>
</BLOCKQUOTE>

<H2>Interfaces</H2>

<P>None</P>

<P> </P>

<H2>Example</H2>

<PRE><TT>import ec.util.ThreadWatcher;

public class ThreadVoyeur
{
    public static void main(String args[]) {
  // Watch the threads every minute
        ThreadWatcher.startWatching(60000);
    SomeOtherFancyClass.doSomethingSpawningLotsOfThreads();
    }
    
    public userInvokedToSpewThreads () {
    ThreadWatcher.showThreads();
    }
    
    public userWantsToStopWatching () {
    ThreadWatcher.stopWatching();
    }
    
    public userWantsToWatchWithThisInterval(int newInterval) {
    ThreadWatcher.waitTime = newInterval;
    // Although probably better to just do this...
    ThreadWatcher.stopWatching();
        ThreadWatcher.startWatching(newInterval);      
    }
}</TT>
</PRE>
</BLOCKQUOTE>

<P>
<HR></P>

<H1><A NAME="Blesser"></A>The Class Blesser</H1>

<P> </P>

<BLOCKQUOTE>
<P>The E environment provides a user interface called the Class Blesser
to manage the TBF, keys, certificates, and E's trust relationships in general.
(See the <I>Authentication</I> section in the<I> E Runtime</I> chapter
for a discussion of these topics.) You can invoke the Class Blesser either
through an interactive graphical user interface, or a command-line interface.
When invoking from the command-line, an input file of commands may be specified
for the Class Blesser to execute as a batch.</P>

<P> </P>

<H2>The Interactive Interface</H2>

<P>To invoke the graphical user interface for the Class Blesser, run the
E Java interpreter (<TT>javaec</TT>) with the Class Blesser argument, with
no command-line options:</P>

<P> </P>

<PRE><TT>  javaec ec.clbless.ClBless </TT></PRE>

<P>The graphical interface has several menus, which are explained in the
following paragraphs:</P>

<P> </P>

<H3>File Menu</H3>

<UL>
<LI><B>Open</B> </LI>

<LI><B>Save</B> </LI>

<LI><B>Save As</B></LI>

<P> These commands bring up standard file dialog boxes for opening and
saving TBF, key, and certificate files.</P>

<P> </P>

<LI><B>Quit</B></LI>

<P> The <B>Quit</B> command exits the Class Blesser.</P>

<P> </P>
</UL>

<H3>Certificate Menu</H3>

<P>The commands in the <B>Certificate</B> menu are used for manipulation
and management of E trust certificates, and are largely self-explanatory.
</P>

<UL>
<LI><B>Generate Certificate</B></LI>

<P> The <B>Generate Certificate </B>command brings up a dialog for interactive
generation of new E trust certificates. The controls in this dialog box
allow interactive generation of variable bindings and source claim statements.
The top pane of the window lists currently defined local variables and
their values, as established with the <B>Assign</B> button. The lower pane
contains the text of the certificate under construction. (The text of an
existing TBF or certificate file can be pasted into this pane for modification.)</P>

<P> </P>

<UL>
<P><A NAME="1000210"></A></P>

<LI><B>PkgBelong</B></LI>

<P> The <B>PkgBelong</B> button in the <B>Create Certificate </B>dialog
brings up the <B>PkgBelong</B> dialog box. The <TT>PkgBelong</TT> predicate
of a source claim statement grants authority to a key to make claims about
membership in a particular E package; this dialog allows you to specify
the name and location of the package.</P>

<P> <A NAME="1000270"></A></P>

<LI><B>LoadOkay</B></LI>

<P> Similarly, the <B>LoadOkay</B> button brings up a dialog for entering
the names of the loading and loaded classes specified in a <TT>LoadOkayCert</TT>
claim statement. (The <TT>loaded_hash</TT> and <TT>loading_hash</TT> parameters
for the classes are calculated and supplied by the Class Blesser.</P>

<P> </P>
</UL>

<LI><B>View Certificates</B> </LI>

<LI><B>Remove Certificates</B> </LI>

<LI><B>Import Certificates</B> </LI>

<LI><B>Export Certificates</B></LI>

<P> These commands bring up additional dialog boxes for displaying and
managing certificates.</P>

<P> </P>
</UL>

<H3>Keys Menu</H3>

<P>The <B>Keys</B> menu is similar to the <B>Certificate</B> menu; it is
used for generation and manipulation of keys. </P>

<UL>
<LI><B>Unlock Keyring...</B></LI>

<P> Unlocks the keyring</P>

<P> </P>

<LI><B>Generate Key</B></LI>

<P> The <B>Generate Key</B> command presents a dialog for generating a
new public-key/private-key pair. The user specifies the desired bit length
of the key (longer keys provide greater security against cryptographic
attack), and a text string by which the key can be looked up later, as
its <TT>key_ID</TT>. </P>

<LI><B>View Public Keys</B> </LI>

<LI><B>View Private Keys</B> </LI>

<LI><B>Remove Public Keys</B> </LI>

<LI><B>Remove Private Keys</B> </LI>

<LI><B>Import Public Keys</B> </LI>

<LI><B>Import Private Keys</B> </LI>

<LI><B>Export Public Keys</B> </LI>

<LI><B>Export Private Keys</B> </LI>

<P>These commands are similar to their counterparts in the <B>Certificate</B>
menu. If an operation is being attempted on a private key, the Class Blesser
displays a <TT>Passphrase</TT> field. Use this field to verify your ownership
of the private key by entering a secret passphrase known only the creator
of the key.</P>

<P> </P>
</UL>

<H3>Help Menu</H3>

<UL>
<LI><B>Help</B></LI>

<P> The <B>Help</B> command in the <B>Help</B> menu brings up a window
full of explanatory text about the various commands and dialogs available
through the Class Blesser interface. </P>

<LI><B>About</B></LI>

<P> The <B>About</B> command displays version and copyright information
for the Class Blesser itself.</P>

<P> </P>
</UL>

<H2>The Command-Line Interface</H2>

<P>You can also invoke the Class Blesser from the command line by using
options:</P>

<P> </P>

<PRE><TT>  javaec ec.clbless.ClBless <I>options</I></TT></PRE>

<P>where options are chosen from among:</P>

<P> </P>

<PRE><TT>  -log <I>&lt;LogFile&gt;
</I>  -verbose
  -help [<I>&lt;cmd&gt;</I>]
  -infile <I>&lt;InputFile&gt;
</I>  -cmd <I>NAME</I> <I>&lt;arg1&gt;</I> [<I>&lt;arg2&gt;</I> .. <I>&lt;argn&gt;</I>]
  -tbf <I>&lt;input file&gt;</I></TT>
</PRE>

<H3>Command-Line Options</H3>

<UL>
<LI><B>-log </B><I>&lt;LogFile&gt;</I></LI>

<P> Route diagnostic messages and other output to the specified <I>LogFile</I>.
Requests for passwords and other secure input will still be routed to the
terminal. If a file with the same name already exists, it will be overwritten.
</P>

<LI><B>-verbose</B></LI>

<P> Provide detailed feedback. This is routed to the active terminal (or
to a log file if specified).</P>

<P> </P>

<LI><B>-help [</B><I>&lt;cmd&gt;</I><B>]</B></LI>

<P> Display a brief text description of the named command. If no command
is specified, the Class Blesser displays a list of the available commands.</P>

<P> </P>

<LI><B>-infile </B><I>&lt;InputFile&gt;</I></LI>

<P> Invokes the Class Blesser in batch mode to execute the list of commands
contained in <I>InputFile</I>. Any required passwords or other input will
be requested from the terminal at the start of execution.</P>

<P> </P>

<LI><B>-cmd </B><I>NAME &lt;arg1&gt;</I><B> [</B><I>&lt;arg2&gt;</I><B>
.. </B><I>&lt;argn&gt;</I><B>]</B></LI>

<P> Invokes the Class Blesser to execute a single key command or certificate
command. The named command may be any of the batch-mode key or certificate
commands.</P>

<P> </P>

<LI><I>-</I><B> tbf </B><I>&lt;InputFile&gt;</I></LI>

<P> Builds a trust boot file from a text input file. The input file cannot
have the same name as an existing trust boot file; this option does not
overwrite any file of the same name. You can then copy this new trust boot
file to your <TT>~/e/tbf</TT> directory, where the trust boot file resides.</P>

<P> </P>
</UL>

<H3>Key Commands</H3>

<UL>
<LI><B>-cmd KADD -key </B><I>&lt;KeyInfo&gt;</I><B> -keylen </B><I>&lt;KeyLen&gt;</I></LI>

<P> (Key Add) Generate a public/private key pair with the label <I>KeyInfo,</I>
of length <I>KeyLen.</I></P>

<P> </P>

<LI><B>-cmd KDEL -keyring &lt;public/secret&gt; -key </B><I>&lt;KeyInfo&gt;</I></LI>

<P> (Key Delete) Remove the key corresponding to <I>KeyInfo</I> from your
public or secret keyring.</P>

<P> </P>

<LI><B>-cmd KOUT -keyring &lt;public/secret&gt; -file </B><I>&lt;FileName&gt;</I></LI>

<P> (Keys Out) Export the keys in your public or secret keyring to the
file <I>FileName</I> in ASCII form.</P>

<P> </P>

<LI><B>-cmd KIN -keyring &lt;public/secret&gt; -file </B>&lt;FileName&gt;</LI>

<P> (Keys In) Import all keys in file <I>FileName</I> to your public or
secret keyring.</P>

<P> </P>

<LI><B>-cmd KLIST -keyring &lt;public/secret&gt;</B></LI>

<P> (Key List) Display the key info and key ID for all keys in your public
or secret keyring.</P>

<P> </P>
</UL>

<H3>Certificate Commands</H3>

<UL>
<LI><B>-cmd CADD -sigKey &lt;SigKeyInfo&gt; [-keylen &lt;KeyLen&gt;] -claim
&lt;Claim&gt;</B></LI>

<P> (Certificate Add) Create a certificate database that makes a claim
and signs it with the key corresponding to <I>SigKeyInfo.</I> If such a
key doesn't exist yet, create it (with key length <I>KeyLen</I> if provided).
<I>Claim</I> is a claim string, in the form described in <I>Source Claim
Statements</I> in the <I>E Runtime</I> chapter.<I>Claim</I> must be surrounded
by single quotes because claim statements can contain double-quotes.</P>

<P> </P>

<LI><B>-cmd CMC -sigKey &lt;SigKeyInfo&gt; -claim &lt;Claim&gt;</B></LI>

<P> (CanMakeClaim) Create a <TT>CanMakeClaim</TT> certificate asserting
<I>Claim</I>, signed by the key corresponding to <I>KeyInfo,</I> and add
it to the certificate database.</P>

<P> </P>

<LI><B>-cmd CMC -sigKey &lt;SigKeyInfo&gt; -key &lt;KeyInfo&gt; [-keylen
&lt;KeyLen&gt;] -pkg &lt;PkgName&gt;</B></LI>

<P> (CanMakeClaim) Create and add to the database a <TT>CanMakeClaim</TT>
certificate, signed by the key corresponding to <I>SigKeyInfo,</I> asserting
that the key corresponding to <I>KeyInfo</I> can make any <TT>PkgBelongCert</TT>
claim about the package <I>PkgName.</I> The generated certificate is of
the form:</P>

<P> </P>

<PRE><TT><I>  SigKeyInfo</I> states {
    <I>KeyInfo</I> CanMakeClaim where {
      delegate = &quot;yes|no&quot; and
      claim == &quot;PkgBelongCert where (pkg == '<I>PkgName</I>')&quot;
    }
  }</TT>
</PRE>

<LI><B>-cmd CMC -sigKey &lt;SigKeyInfo&gt; -key &lt;KeyInfo&gt; [-keylen
&lt;KeyLen&gt;] -pkg &lt;PkgName&gt; -file &lt;FileName&gt;</B></LI>

<P> </P>

<P>(CanMakeClaim) Create and add to the database a <TT>CanMakeClaim</TT>
certificate, signed by <I>SigKeyInfo,</I> asserting that key <I>KeyInfo</I>
can make <TT>LoadOkayCert</TT> claims loading the class in file <I>FileName,</I>
which belongs to the package <I>PkgName.</I> The generated certificate
is of the form:</P>

<P> </P>

<PRE><TT><I>  SigKeyInfo</I> states {
    <I>KeyInfo</I> CanMakeClaim where {
      delegate = &quot;yes|no&quot;
      and claim == &quot;LoadOkayCert where (
        loaded_class == '<I>FileName</I>'
        and pkg == '<I>PkgName</I>'
      )&quot;
    }
  }</TT>
</PRE>

<LI><B>-cmd PBC -sigKey &lt;SigKeyInfo&gt; [-keylen &lt;KeyLen&gt;] -pkg
&lt;PkgName&gt; -file &lt;FileName&gt;</B></LI>

<P> (PkgBelongCert) Create and add to the database a signed certificate
asserting that the class in file <I>FileName</I> belongs to the package
<I>PkgName</I>.</P>

<P> </P>

<LI><B>-cmd PBC -sigKey &lt;SigKeyInfo&gt; [-keylen &lt;KeyLen&gt;] -pkg
&lt;PkgName&gt; -path &lt;Path&gt;</B></LI>

<P> (PkgBelongCert) Create and add to the database a signed certificate
asserting that all of the classes in the directory specified by <I>Path</I>
belong to package <I>PkgName.</I></P>

<P> </P>

<LI><B>-cmd LOC -sigKey &lt;SigKeyInfo&gt; -loaded &lt;PkgName&gt; -path
&lt;Path&gt; -loading &lt;PkgName&gt; -path &lt;Path&gt;</B></LI>

<P> (LoadOkayCert) Create and add to the database a signed certificate
asserting a <TT>LoadOkayCert</TT> claim about the specified <TT>-loaded</TT>
and <TT>-loading</TT> packages.</P>

<P> </P>

<LI><B>-cmd CDEL -sigKey &lt;SigKeyInfo&gt; -class &lt;Classname&gt;</B></LI>

<P> (Certificate Delete) Delete all claims in the certificate database
about class <I>ClassName. ClassName</I> must be fully-qualified (no wildcards).</P>

<P> </P>

<LI><B>-cmd COUT -file &lt;FileName&gt;</B></LI>

<P> (Certificate Out) Export the certificate database to <I>FileName.</I></P>

<P> </P>

<LI><B>-cmd CIN -file &lt;FileName&gt;</B></LI>

<P> (Certificate In) Add to the certificate database the certificates contained
in <I>FileName.</I></P>

<P> </P>

<LI><B>-cmd CGRP -sigKey &lt;SigKeyInfo&gt;</B></LI>

<P> (Certificate Group) Consolidate all certificates in the database signed
by the key corresponding to <I>SigKeyInfo</I> into a single signed certificate.</P>

<P> </P>

<LI><B>-cmd ALOC -sigkey &lt;SigKeyInfo&gt; -pkg &lt;PkgName&gt; -path
&lt;Path&gt; [-keylen &lt;KeyLen&gt; -classkeys &lt;key/package&gt;] </B></LI>

<P>(Autogenerate LoadOkayCert) Generate keys corresponding to <I>SigKeyInfo</I>
for each class or package loaded from classes within the indicated package.
This command creates <TT>CanMakeClaim</TT> certificates for the generated
keys. It then also generates the LoadOkayCerts for each class loaded, signing
them with the appropriate generated key. </P>

<P>You can use the <I>classkeys</I> option to create one key/loaded class
instead of one key/loaded package. <I>Keylen</I> is the length of the generated
keys, if different from the length of the signing key. <I>Path</I> is the
location of the classes on disk.</P>

<P> </P>
</UL>

<H3>Command File Syntax</H3>

<P>A command is interpreted as everything between a <TT>-cmd</TT> and either
the next <TT>-cmd</TT> or the end of the file. The command file may contain
comment lines; any line beginning with <TT>#</TT> or <TT>//</TT> is ignored.
</P>

<P>The order of arguments in a single command is ignored. If the same argument
(such as<TT> -sigKey</TT>) appears more than once in a command, the last
argument given will be used. </P>

<P>If multiple <TT>-cmds</TT> are specified on the shell command line invoking
the Class Blesser, only the first one will be processed.</P>

<P> </P>
</BLOCKQUOTE>

<P>
<HR></P>

<ADDRESS>Copyright (c) 1996 Electric Communities. All rights reserved worldwide.<BR>
Most recent update: 7/19/96<BR>
</ADDRESS>

</BODY>
</HTML>
