<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<!--last modified on Saturday, October 03, 1998 04:19 PM -->
<HTML><!-- #BeginTemplate "/Templates/pink.dwt" --><!-- DW6 -->
<HEAD>
<!-- #BeginEditable "doctitle" --> 
<TITLE>Dough Notes</TITLE>
<!-- #EndEditable --> 
<meta http-equiv=content-type content="text/html; charset=UTF-8">
<meta name="Author" content="Mark S. Miller">
<link rel=author rev=made title="Mark S. Miller">
<META NAME="description" CONTENT="E: Cryptographic Capabilities for Distributed Smart Contracting">
<META NAME="keywords" CONTENT="p2p, p2p language, p2p computing, p2p objects, secure p2p, p2p capabilities, object oriented p2p,
  capability-based p2p, Capability Security, Capabilities, Cryptography, Distributed Objects, Distributed
  Language, Distributed Capabilities, Lambda Calculus, Scripting Language, Distributed Language, Persistent
  Language, Persistent Capabilities, Persistent Objects, Java Shell, Capability Shell, Scripting Java, Smart
  Contracting, Agoric E-Commerce, Open Source, Message pipelining, quasi literal, vat, event loop, granovetter diagram ">
<link rel="stylesheet" href="../../erights.css" type="text/css">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFEEDD" LINK="#0000FF" VLINK="#800080">
<TABLE BORDER="0" width="100%">
  <TR VALIGN="TOP"> 
    <TD WIDTH="10%">&nbsp; </TD>
    <TD> <TABLE BORDER="0" WIDTH="100%">
        <TR> 
          <TD ALIGN="LEFT" valign="top"> <table cellpadding="2">
              <tr> 
                <td valign="top" align="left" colspan="3"><a href="../../index.html"><img src="../../images/e-lambda.gif" width="32" height="32" border="0" alt="ERights Home"></a> 
                  <!-- #BeginEditable "Path" -->/&nbsp;<a href="../index.html">smart-contracts</a>&nbsp;/&nbsp;<a href="index.html">donut-lab</a>&nbsp;<!-- #EndEditable --></td>
              </tr>
              <tr> 
                <td valign="top" align="right"><!-- #BeginEditable "PrevButton" --><img src="../../images/prev-gray.gif" width="64" height="32" alt="No Previous Sibling"><!-- #EndEditable --></td>
                <td valign="bottom" align="left"><!-- #BeginEditable "FirstButton" --><!-- #EndEditable --></td>
                <td valign="top" align="left"><!-- #BeginEditable "NextButton" --><img src="../../images/next-gray.gif" width="64" height="32" alt="No Next Sibling"><!-- #EndEditable --></td>
              </tr>
            </table></TD>
          <TD rowspan="2" ALIGN="RIGHT"> <P ALIGN="RIGHT"><FONT SIZE="7"><!-- #BeginEditable "BigTitle" --><B>Dough 
              Notes </B><!-- #EndEditable --></FONT> </TD>
        </TR>
        
      </TABLE>
      <hr> <!-- #BeginEditable "LongBody" --> 
      <P ALIGN="left">first race condition in several years of E programming
      <p>virtual os slivers are unsafe to put behind a firewall: though the underlying 
        machine may be safe from direct attack from within the protection boundary 
        formed by the virtual OS, the sliver, with its full TCP/IP addressing 
        authority, can read and write file volumes that have been shared behind 
        the firewall, can sniff ethernet packets, can send email with viruses 
        attached to people inside the firewall that would have been stripped out 
        by the firewall, and can read company sensitive internal web pages that 
        are also supposed to be protected from outsiders by the firewall.</p>
      <p>None of these problems exist with the donut sliver. It does not have 
        full TCP/IP authority: it has specifically the authority to communicate 
        with any other object for which it is given a live ref ....</p>
      <p>Compare this on the other hand to java applets, which might at first 
        glance seem to have the same security properties. Java applets by default 
        have the authority to speak to the site that launched them; in donutlab 
        this would be equivalent to being able to talk to the domain where the 
        sliceboss resides. However, the sliceboss cannot confer authority to talk 
        to objects on other sites to the applet: there is no concept of dynamic 
        allocation of authority. Hence the only way applets could work in a planetlab 
        or donutlab is by routing all messages through the site that created the 
        applet, a strategy that effectively renders the applet useless for planetlab-like 
        applications</p>
      <p>All comparisons made to PlanetLab in this paper are comparisons to PlanetLab 
        as it existed at the beginning of the DonutLab 48 hour effort. It does 
        not make comparisons to hypothetical enhancements of PlanetLab which could 
        be deployed after unknown amounts of effort. </p>
      <p>obvious enhancements: moneychanger, ratings services, multi-protocol 
        access to specified domains, support for apps with multiple libraries 
        (files).</p>
      <p>introduction supergoal: Numerous efforts have been startedin recent years 
        to build programming languages capable of compactly and reliably representing 
        large secure distributed systems (E, OzE, JoeE, SqueakE, etc). These efforts 
        are, from different directions and with different speeds, moving toward 
        a view of distributed systems that supports persistent distributed object 
        capabilities for security with promise pipelining for network traffic 
        handling, to maximize robustness and effective use of bandwidth while 
        minimizing the impact of latency, which seems the long term, intractable 
        bottleneck in distributed systems.</p>
      <p> Workers in the field of distributed object capabilities tend to look 
        at PlanetLab and feel a sense of chagrin, knowing that a PlanetLab built 
        in a more powerful paradigm could be easier to use, more secure, easier 
        to maintain, more scalable, and more robust, all at the same time. PlanetLab 
        members reasonably pointed out that if this is the case, then some one 
        thing must be easier and better that could be built as a demonstration.</p>
      <p>Our supergoal, then, was to demonstrate the advantages of using secure 
        distributed programming tools for the building of secure distributed systems 
        like PlanetLab. However, a good demonstration vehicle proved difficult 
        to identify, for the following reason: while the entire world may be easier 
        if done uniformly inside a new paradigm, it can be quite traumatic and 
        expensive to build a small element of a new paradigm that is supposed 
        to strap onto the side of an existing legacy system that is, unintentionally 
        effectively, quite hostile to new paradigms. It can be far more expensive 
        to create the bridge between paradigms than to build any individual module. 
        Indeed, it can be much less expensive to build an entire system in the 
        new paradigm than to build the bridge to a small piece.</p>
      <p>Therefore, the concept of DonutLab was conceived as a complete rebuild 
        from scratch of a PlanetLab-like system that embodies the new paradigm. 
        DonutLab is intended to have all the positive characteristics of PlanetLab 
        plus all the additional positive characteristics that asuperior paradigm 
        can deliver. While the 48 hour DonutLab does not achieve this full goal, 
        it points the way clearly; straightforward enhancements listed at the 
        end of this paper would indeed encompass all the power of PlanetLab with 
        none of its liabilities.</p>
      <p> ----</p>
      <p> BigBang for individual service, the first creation of a service. persisting 
        the first kiosk: circular creation problem, introducer must be made first 
        so that account can be loaded from file to be used to create the kiosk, 
        but introducer must be last so persistence system can be initiated after 
        the kiosk is initiated. Solved with promises: a promise for an account 
        is created, the promise is resolved after the introducer is created after 
        the kiosk is created.</p>
      <p>---</p>
      <p> bigBang for the system as a whole: first create mints, which are dependent 
        on no one else. Then kiosks, dependent only on mints. Then sliver servers 
        which need both. Then apps. Adding multiple mints, which means adding 
        multiple mints, increases the complexity significantly: moneychangers 
        need to come to life with accounts on multiple mints, which must be hardwired.</p>
      <p>----</p>
      <p> Another 72 hours. based on what we have learned, we believe we could 
        add the following features in another 72 hours: moneyChangers, though 
        these can spontaneously evolve as third parties add new mints, and new 
        services that use these mints</p>
      <p>------</p>
      <p> upgrades of persistent systems: done routinely in the last day of the 
        effort, as we modified the code for the sliverserver and brought the sliverserver 
        back to life with the new code.</p>
      <p> ----</p>
      <p> encountered true concurrency race condition bug in 3-vat comm, which 
        is interesting considering how rare such bugs have appeared in the 2 previous 
        years when much use of 2-vat comm was done</p>
      <p> ----</p>
      <p> iou mint holds cannot subdelegate expenditures. The doughbot needs to 
        receive the whole account, it cannot simply be given a hold with the amount 
        of money it is authorized to spend on an attack (this amount must in turn 
        be subdivided, part of it being sent out for each sliver rented).</p>
      <p>---</p>
      <p> for beginning users of donutlab, the transfer op in the mint should 
        do a vowTransfer, not demand it of all users.</p>
      <p>---</p>
      <p> lop off the head of the doughbot, it does not stop the attack. you have 
        to stop all the doughbits on all the sliverservers.</p>
      <p>----</p>
      <p> demo version of the doughbot is the slowbot. show slow code, full pipelining 
        code, compare contrast.</p>
      <p>----</p>
      <p>The &quot;just do it&quot; philosophy encouraged by promise pipelining: 
        don't check to see if something will work before composing a bunch of 
        stuff to do it, this is both unreliable, unnecessary, and inefficient 
        because of latency. Just do it. example, sending money to all the sliverservers 
        you got from a kiosk even though some might be down. If they are down, 
        the money refunds, if they are up, it just works with no round trip. If 
        they are up when you check, but then go down while you are now gearing 
        up to use it, it was unreliable and you have to handle this exceptional 
        case anyway.</p>
      <p>----</p>
      <p>use of promises to make &quot;big bang&quot; easier&quot;</p>
      <p>----</p>
      <p>ease of moving authorities around by simply moving files around: making 
        the doughbot share an account with the sliverserver for testing purposes.</p>
      <p>----</p>
      <p> things to fix for demo:<br>
        show credit counting down on the sliverserver<br>
        reformat hits/misses line, use term &quot;salvo&quot;<br>
        cleanup traces from kiosks<br>
        rename &quot;test area&quot; &quot;target&quot;<br>
        multiple sliverservers</p>
      <p>------</p>
      <p> things to fix for robustness for another programmer/experimenter:<br>
        kiosks detect loss of liveref, delist the server<br>
        kiosks and sliverservers set timers, refresh their ads regularly<br>
        unlimited persistent account construction<br>
        grabCash on donutAccount<br>
        kiosks and sliverservers detect loss of connection to mint, poll for mint 
        return (need sturdyrefs, not liverefs). For demoing, doughbits should 
        do this too.</p>
      <p> ------</p>
      <p> things to fix for full-up example:<br>
        second mint<br>
        moneychangers. Minimal is transient exchanges, better is to build a bank 
        where you can make a deposit, this is robust if mint1 is down and you 
        still want to work using mint 2.</p>
      <p>-----</p>
      <p> to understand the donutlab, you need to understand not only software 
        and capabilities and promises, you also need to understand financial systems, 
        how they operate. </p>
      <!-- #EndEditable --></TD>
    <TD WIDTH="10%" rowspan="2" align="right" valign="bottom"> </TD>
  </TR>
  <TR VALIGN="TOP"> 
    <TD WIDTH="10%">&nbsp;</TD>
    <TD> <hr>
      Unless stated otherwise, all text on this page which is either unattributed 
      or by Mark S. Miller is hereby placed in the public domain. 
        <div align="center"> 
        <table width="100%" cellpadding="4" cellspacing="0">
          <tr> 
            <td> <table align="left" cellpadding="2">
                <tr> 
                  <td valign="top" align="left" colspan="3"><a href="../../index.html"><img src="../../images/e-lambda.gif" width="32" height="32" border="0" alt="ERights Home"></a> 
                    <!-- #BeginEditable "Path2" -->/&nbsp;<a href="../index.html">smart-contracts</a>&nbsp;/&nbsp;<a href="index.html">donut-lab</a>&nbsp;<!-- #EndEditable --></td>
                </tr>
                <tr> 
                  <td valign="top" align="right"><!-- #BeginEditable "PrevButton2" --><img src="../../images/prev-gray.gif" width="64" height="32" alt="No Previous Sibling"><!-- #EndEditable --></td>
                  <td valign="bottom" align="left"><!-- #BeginEditable "FirstButton2" --><!-- #EndEditable --></td>
                  <td valign="top" align="left"><!-- #BeginEditable "NextButton2" --><img src="../../images/next-gray.gif" width="64" height="32" alt="No Next Sibling"><!-- #EndEditable --></td>
                </tr>
              </table></td>
            <td> <table border="3" align="center" cellpadding="6" cellspacing="3">
                <tr> 
                  <td> <div align="center"><font size="-1"><a href="../../elib/index.html">ELib</a> 
                      &nbsp;&nbsp; <a href="../../elang/index.html">E Language</a> 
                      &nbsp;&nbsp; <a href="../index.html">Smart 
                      Contracts</a> &nbsp;&nbsp; <a href="../../related.html">Related</a> 
                      </font></div></td>
                </tr>
                <tr> 
                  <td> <div align="center"><font size="-1"><a href="../../download/index.html">Download</a> 
                      &nbsp;&nbsp; <a href="http://mumble.net/e/faq.html">FAQ</a> 
                      &nbsp;&nbsp; <a href="../../javadoc/index.html">API</a> &nbsp;&nbsp; 
                      <a href="http://www.eros-os.org/pipermail/e-lang/">Mail 
                      Archive</a> &nbsp;&nbsp; <a href="../../donate.html">Donate</a></font></div></td>
                </tr>
              </table></td>
            <td><div align="right"> 
                <p><a href="https://sourceforge.net/tracker/?func=add&amp;group_id=75274&amp;atid=551529"><i>report 
                  bug</i></a> (including <a href="http://validator.w3.org/check/referer">invalid 
                  html</a>) </p>
                <p><a href="http://www.epic.org/crypto/"><img src="../../images/key.gif" width="37" height="19" alt="Golden Key Campaign" border="0"></a>&nbsp;<a href="http://www.eff.org/br/"><img src="../../images/ribbon.gif" width="18" height="30"
alt="Blue Ribbon Campaign" border="0"></a></div></td>
          </tr>
          
        </table>
      </div></TD>
  </TR>
</TABLE>
</BODY>
<!-- #EndTemplate --></HTML>
